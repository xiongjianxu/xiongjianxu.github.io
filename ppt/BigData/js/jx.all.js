(function(){var e="1.0",t="JxMark",n=this,i=n.Jx,r={},a={},s=[],o={NO_DEBUG:0,SHOW_ALL:1},l={debug:1},c=function(e,t,n){return e+="",l.debug&&this.console&&(this.console.out?this.console.out(e,t,n):alert(e+" - 消息类型["+n+"]")),e};try{if(!(i===undefined||i.mark&&i.mark===t))throw Error('"Jx" name is defined in other javascript code !!!');i&&(r=i.VERSIONS,a=i.PACKAGE,s=i.PACKAGES),i=function(e,t){var n=this;if(t)this._init();else if(e){e+="";try{if(!i.VERSIONS[e])throw n=i.VERSIONS[i.DEFAULT_VERSION],Error("没有找到 JET version "+e+", 所以返回默认版本 JET version "+i.DEFAULT_VERSION+"!");n=i.VERSIONS[e]}catch(r){n.out("A.错误：["+r.name+"] "+r.message+", "+r.fileName+", 行号:"+r.lineNumber+"; stack:"+typeof r.stack,2)}}else n=i.VERSIONS[i.DEFAULT_VERSION];return n},i.prototype={version:e,DEBUG:o,option:l,_init:function(){this.constructor=i},$namespace:function(e){var t,n,i=e.split("."),r=window;for(t=0;i.length>t;t+=1)n=i[t],r[n]=r[n]||{},r=r[i[t]];return r},$package:function(){var e,t=arguments[0],i=arguments[arguments.length-1],r=n;if("function"!=typeof i)throw Error("Function required");if("string"==typeof t){if(r=this.$namespace(t),a[t]);else{var o={isLoaded:!0,"package":r,returnValue:e};a[t]=o,s.push(o)}r.packageName=t}else"object"==typeof t&&(r=t);e=i.call(r,this)},checkPackage:function(e){return i.PACKAGES[e]},out:c,debug:function(){},profile:function(){},warn:function(){},error:function(){},startTime:+new Date,about:function(){return this.out("JET (Javascript Extend Tools)\nversion: "+this.version+"\n\nCopyright (c) 2009, All rights reserved.")},toString:function(){return"JET version "+this.version+" !"}},i.VERSIONS=r,i.PACKAGE=a,i.PACKAGES=s,i.VERSIONS[e]=new i(e,!0),i.DEFAULT_VERSION=e,i.mark=t,n.Jet=n.Jx=i}catch(d){c("JET 微内核初始化失败! B.错误：["+d.name+"] "+d.message+", "+d.fileName+", 行号:"+d.lineNumber+"; stack:"+typeof d.stack,1)}})(),Jx().$package(function(e){var t,n,i,r,a,s,o,l,c,d,u,h,p,f,m,g,v,A,y,b,x,w,S,P,E;t=function(e){return e===void 0},n=function(e){return null===e},i=function(e){return(0===e||e)&&e.constructor===Number},a=function(e){return(e===!1||e)&&e.constructor===Boolean},r=function(e){return(""===e||e)&&e.constructor===String},s=function(e){return e&&e.constructor===Object||"[object Object]"==e+""},o=function(e){return e&&e.constructor===Array||"[object Array]"===Object.prototype.toString.call(e)},l=function(e){return e&&e.callee&&i(e.length)?!0:!1},c=function(e){return e&&e.constructor===Function},d=function(e){return t(e)?"undefined":n(e)?"null":i(e)?"number":a(e)?"boolean":r(e)?"string":s(e)?"object":o(e)?"array":l(e)?"arguments":c(e)?"function":"other"},f=function(){return!0},m=function(e,t){return Math.floor(Math.random()*(t-e+1)+e)},v=function(e){var t=function(){};return t.prototype=e,new t},u=function(t){return e.isFunction(t)?t:function(){return t}},h=function(){var t,n,i=arguments.length;for(t=0;i>t;t++)try{n=arguments[t]();break}catch(r){e.out("C.错误：["+r.name+"] "+r.message+", "+r.fileName+", 行号:"+r.lineNumber+"; stack:"+typeof r.stack,2)}return n},g=function(e){var t,n,e,i,r=arguments;for(1===r.length?(e=this,t=0):(e=r[0]||{},t=1);arguments.length>t;t++){i=arguments[t];for(n in i){var a=e[n],l=i[n];a!==l&&(!l||!s(l)||o(l)||l.nodeType||c(l)?void 0!==l&&(e[n]=l):(a=e[n]||{},e[n]=g(a,l||(null!=l.length?[]:{}))))}}return e},A=function(){return+new Date},y=function(e,t,n,i,r){var a=e.concat(),s=25;i&&(a=e),window.setTimeout(function(){var i=+new Date;do t.call(n,a.shift());while(a.length>0&&50>+new Date-i);a.length>0?window.setTimeout(arguments.callee,s):r&&r(e)},s)},b=function(e){var t,n=0;for(t in e)e.hasOwnProperty(t)&&n++;return n},p=function(){},x=function(e,t){return t=t||{},e.$$rebuildedFunc=e.$$rebuildedFunc||function(){var n,i,r=this;return n=t.contextObj||r,i=Array.prototype.slice.call(arguments,0),void 0!==i&&(i=i.concat(t.arguments)),t.event===!1&&(i=i.slice(1)),e.apply(n,i)},e.$$rebuildedFunc},w=function(e){var t=Array.prototype.slice,n=t.call(arguments,1);return function(){var i=this;return e.apply(i,n.concat(t.call(arguments)))}},S=function(e,t){var n=Array.prototype.slice,i=n.call(arguments,2);return function(){return e.apply(t,i.concat(n.call(arguments)))}},E=function(){var t=arguments.length,n=arguments[t-1];if(n.init=n.init||function(){},2===t){var i=arguments[0].extend,r=function(){};r.prototype=i.prototype;var a=function(){this.init.apply(this,arguments)};return a.superClass=i.prototype,a.callSuper=function(e,t){var n=Array.prototype.slice,i=n.call(arguments,2),t=a.superClass[t];t&&t.apply(e,i.concat(n.call(arguments)))},a.prototype=new r,a.prototype.constructor=a,e.extend(a.prototype,n),a.prototype.init=function(){n.init.apply(this,arguments)},a}if(1===t){var s=function(){return this.init.apply(this,arguments)};return s.prototype=n,s}};var C=new E({init:function(e,t,n,i,r){var a=e.concat(),s=25;i&&(a=e),this.timeout=window.setTimeout(function(){var i=+new Date;do t.call(n,a.shift());while(a.length>0&&50>+new Date-i);a.length>0?this.timeout=window.setTimeout(arguments.callee,s):r&&r(e)},s)},stop:function(){clearTimeout(this.timeout)}});e.isUndefined=t,e.isNull=n,e.isNumber=i,e.isString=r,e.isBoolean=a,e.isObject=s,e.isArray=o,e.isArguments=l,e.isFunction=c,e.$typeof=d,e.$return=u,e.$try=h,e.emptyFunc=p,e.clone=v,e.getLength=b,e.checkJSON=f,e.random=m,e.extend=g,e.now=A,e.timedChunk=y,e.rebuild=x,e.pass=w,e.bind=S,e.bindNoEvent=P,e.Class=E,e.Chunk=C}),Jx().$package(function(e){e.browserOptions={adjustBehaviors:!0,htmlClass:!0},e.host=window.location.host;var t,n,i,r,a,s=navigator.platform.toLowerCase(),o=navigator.userAgent.toLowerCase(),l=navigator.plugins;r=function(e,t){return e=(""+e).replace(/_/g,"."),t=t||1,e=(e+"").split("."),e=e[0]+"."+(e[1]||"0"),e=Number(e).toFixed(t)},t={getPlatform:function(){return s},name:void 0!=window.orientation?"iPod":(s.match(/mac|win|linux/i)||["unknown"])[0],version:0,iPod:0,iPad:0,iPhone:0,android:0,win:0,linux:0,mac:0,touchDevice:!1,set:function(e,t){this.name=e,this.version=t,this[e]=t}},t[t.name]=!0,(a=o.match(/windows ([\d.]+)/))?t.set("win",r(a[1])):(a=o.match(/windows nt ([\d.]+)/))?t.set("win",r(a[1])):(a=o.match(/linux ([\d.]+)/))?t.set("linux",r(a[1])):(a=o.match(/mac ([\d.]+)/))?t.set("mac",r(a[1])):(a=o.match(/ipod ([\d.]+)/))?t.set("iPod",r(a[1])):(a=o.match(/ipad[\D]*os ([\d_]+)/))?t.set("iPad",r(a[1])):(a=o.match(/iphone ([\d.]+)/))?t.set("iPhone",r(a[1])):(a=o.match(/android ([\d.]+)/))?t.set("android",r(a[1])):0,t.touchDevice="ontouchstart"in window,n={features:{xpath:!!document.evaluate,air:!!window.runtime,query:!!document.querySelector},getPlugins:function(){return l},plugins:{flash:function(){var e=0;if(l&&l.length){var t=l["Shockwave Flash"];t&&t.description&&(e=r(t.description.match(/\b(\d+)\.\d+\b/)[1],1)||e)}else for(var n=13;n--;)try{new ActiveXObject("ShockwaveFlash.ShockwaveFlash."+n),e=r(n);break}catch(i){}return e}()},getUserAgent:function(){return o},name:"unknown",version:0,ie:0,firefox:0,chrome:0,opera:0,safari:0,mobileSafari:0,adobeAir:0,set:function(e,t){this.name=e,this.version=t,this[e]=t}},(a=o.match(/msie ([\d.]+)/))?n.set("ie",r(a[1])):(a=o.match(/firefox\/([\d.]+)/))?n.set("firefox",r(a[1])):(a=o.match(/chrome\/([\d.]+)/))?n.set("chrome",r(a[1])):(a=o.match(/opera.([\d.]+)/))?n.set("opera",r(a[1])):(a=o.match(/adobeair\/([\d.]+)/))?n.set("adobeAir",r(a[1])):(a=o.match(/version\/([\d.]+).*safari/))?n.set("safari",r(a[1])):0,(a=o.match(/version\/([\d.]+).*mobile.*safari/))?n.set("mobileSafari",r(a[1])):0,t.iPad&&n.set("mobileSafari","0.0"),n.ie&&(document.documentMode?document.documentMode!==Math.floor(n.ie)&&n.set("ie",r(document.documentMode)):document.documentMode=Math.floor(n.ie)),//!!navigator.userAgent.match(/Apple.*Mobile.*Safari/);
i={name:"unknown",version:0,trident:0,gecko:0,webkit:0,presto:0,set:function(e,t){this.name=e,this.version=t,this[e]=t}},(a=o.match(/trident\/([\d.]+)/))?i.set("trident",r(a[1])):(a=o.match(/gecko\/([\d.]+)/))?i.set("gecko",r(a[1])):(a=o.match(/applewebkit\/([\d.]+)/))?i.set("webkit",r(a[1])):(a=o.match(/presto\/([\d.]+)/))?i.set("presto",r(a[1])):0,n.ie&&(6==n.ie?i.set("trident",r("4")):(7==n.ie||8==n.ie)&&i.set("trident",r("5")));var c=function(){if(n.ie&&7>n.ie)try{document.execCommand("BackgroundImageCache",!1,!0)}catch(e){}};e.browserOptions.adjustBehaviors&&c();var d=function(e){return(e+"").replace(/\./gi,"_")},u=function(){var e=document.documentElement,r=[e.className];r.push("javascriptEnabled"),r.push(t.name),r.push(t.name+d(t.version)),r.push(n.name),r.push(n.name+d(n.version)),document.documentMode&&r.push("documentMode_"+document.documentMode),r.push(i.name),r.push(i.name+d(i.version)),n.plugins.flash&&(r.push("flash"),r.push("flash"+d(n.plugins.flash))),window.webTop!==void 0&&window.webTop&&r.push("webTop"),e.className=r.join(" ")};e.browserOptions.htmlClass&&u(),e.platform=t,e.browser=n,e.browser.engine=i}),Jx().$package(function(e){var t,n,i,r,a,s,o,l,c,d,u,h,p,f,m,g,v,A,y,b,x,w,S,P,E,C,k,T,R,B,M,I,L,D,N,H,_,O,X,Y,F,W,V,z,G,j,Q,U,q,K,J,Z,$,et,tt,nt,it=null;e.dom=e.dom||{},t=e.dom,n=e.browser,$=t.win?t.win.contentWindow:t.win||window,t.win=$,t.doc=$.document;var rt=function(e){return e&&Object.prototype.hasOwnProperty.call(e,"classList")};et=function(){return tt?tt:tt="CSS1Compat"===document.compatMode?document.documentElement:document.body},J=function(e){return e?(e=e||window.document,it=9===e.nodeType?e:e.ownerDocument||t.doc):it?it:(e=e||window.document,it=9===e.nodeType?e:e.ownerDocument||t.doc)},Z=function(e){var n=J(e);return e.document?e:n.defaultView||n.parentWindow||t.win},nt=function(e){return e=e||J(),e.getElementsByTagName("head")?e.getElementsByTagName("head")[0]:e.documentElement},i=function(e,t){return t=t||document,t.getElementById(e)},r=function(e,t){return J(t).getElementsByName(e)},a=function(e,t){var t=t||J();return t.getElementsByTagName(e)},s=function(e){var t=e?e[TEXT_CONTENT]:"";return t===UNDEFINED&&INNER_TEXT in e&&(t=e[INNER_TEXT]),t||""},o=function(t,n,i){var r,a=!1,s=n;do r=s.getAttribute(t),e.isUndefined(r)||e.isNull(r)?s===i?a=!0:s=s.parentNode:a=!0;while(!a);return r},l=function(e,t,n){var i,r=n?n.document:document,a=r.createElement(e),s={"class":function(){a.className=t["class"]},style:function(){b(a,t.style)}};for(i in t)s[i]?s[i]():a.setAttribute(i,t[i]);return a},c=function(e){var t=document.createElement("div");t.innerHTML=e;var n=t.childNodes;return 0===n.length?null:1===n.length?n[0]:n},R=function(e){var t;return t=e?e.scrollHeight:Math.max(document.documentElement.scrollHeight,document.body.scrollHeight),t||0},B=function(e){var t;return t=e?e.scrollWidth:Math.max(document.documentElement.scrollWidth,document.body.scrollWidth),t||0},M=function(e){return e=e||et(),e.clientHeight},I=function(e){return e=e||et(),e.clientWidth},L=function(t){return e.browser.engine.name,t=t||et(),t.offsetHeight},D=function(t){return e.browser.engine.name,t=t||et(),t.offsetWidth},N=function(e){var t;return t=e?e.scrollLeft:Math.max(document.documentElement.scrollLeft,document.body.scrollLeft),t||0},H=function(e){var t;return t=e?e.scrollTop:Math.max(document.documentElement.scrollTop,document.body.scrollTop),t||0},d=function(e,t){"string"==typeof e.className?e.className=t:e.setAttribute("class",t)},u=function(e){return"string"==typeof e.className?e.className:e.getAttribute("class")||""},h=function(){return function(e,t){return e&&t?rt(e)?e.classList.contains(t):(" "+u(e)+" ").indexOf(" "+t+" ")>-1:!1}}(),p=function(){return function(e,t){if(e&&t&&!h(e,t))if(rt(e))e.classList.add(t);else{var n=u(e);n+=" "+t,d(e,n)}}}(),f=function(){return function(e,t){if(e&&t&&h(e,t))if(rt(e))e.classList.remove(t);else{var n=u(e);n=n.replace(RegExp("(?:^|\\s)"+t+"(?:\\s|$)")," "),d(e,n)}}}(),m=function(){return function(e,t){e&&t&&(h(e,t)?f(e,t):p(e,t))}}(),g=function(e,t,n){f(e,t),p(e,n)},v=function(e,n,i){var r=t.node("style",{id:n||"",type:"text/css"});if(r.styleSheet)r.styleSheet.cssText=e;else{var a=document.createTextNode(e);r.appendChild(a)}return t.getDocHead(i).appendChild(r),r},A=function(t,n,i){if(t){var r=e.browser.name;if(("float"===n||"cssFloat"===n)&&(n="ie"===r?"styleFloat":"cssFloat"),"opacity"===n&&"ie"===r&&9>e.browser.ie){var a=100*i;return t.style.filter='alpha(opacity="'+a+'")',t.style.zoom||(t.style.zoom=1),void 0}t.style[n]=i}},y=function(t,n){if(t){var i=Z(t),r=e.browser.name;if(("float"===n||"cssFloat"===n)&&(n="ie"===r?"styleFloat":"cssFloat"),"opacity"===n&&"ie"===r&&9>e.browser.ie){var a=1,s=t.style.filter.match(/opacity=(\d+)/);return s&&s[1]&&(a=s[1]/100),a}if(t.style[n])return t.style[n];if(t.currentStyle)return t.currentStyle[n];if(i.getComputedStyle)return i.getComputedStyle(t,null)[n];if(document.defaultView&&document.defaultView.getComputedStyle){n=n.replace(/([/A-Z])/g,"-$1"),n=n.toLowerCase();var o=document.defaultView.getComputedStyle(t,"");return o&&o.getPropertyValue(n)}}},addStyles=function(e){var t,n;if(document.createStyleSheet)n=document.createStyleSheet();else{t=document.createElement("style");var i=document.getElementsByTagName("head")[0];i.appendChild(t),n=document.styleSheets[document.styleSheets.length-1]}var r=typeof e;if("string"==r)t?t.innerHTML=e:n.cssText=e;else if("object"==r){var a=0;for(selector in e)if(n.insertRule){var s=selector+"{"+e[selector]+"}";n.insertRule(s,a++)}else n.addRule(selector,e[selector],a++)}},w=function(e,t){e.style.cssText+=";"+t},b=function(e,t){e.style.cssText=t},x=function(e){return e.style.cssText},S=function(e,t){var n,i=e.getAttribute("_oldDisplay");n=i?i:y(e,"display"),t?A(e,"display",t):"none"===n?A(e,"display","block"):A(e,"display",n)},P=function(e){var t=y(e,"display");return"none"===t?!1:!0},E=function(e){var t,n=e.getAttribute("_oldDisplay");t=n?n:y(e,"display"),"none"===t?A(e,"display",""):A(e,"display",t)},C=function(e){var t=y(e,"display"),n=e.getAttribute("_oldDisplay");n||("none"===t?e.setAttribute("_oldDisplay",""):e.setAttribute("_oldDisplay",t)),A(e,"display","none")};var at=function(){for(var e=document.createElement("a").style,t=["webkitTransform","MozTransform","OTransform","msTransform","Transform"],n=t.length;n--;)if(t[n]in e)return t[n]}();(function(){for(var e=document.createElement("a").style,t=["webkitTransition","MozTransition","OTransition","msTransition","Transition"],n=t.length;n--;)if(t[n]in e)return t[n]})(),k=function(e,t,n){var i=e.style[at]||"";switch(n){case"translate3d":case"translate3d-x":case"translate3d-y":case"translate3d-z":if(/translate3d\([^)]*\)/.test(i)||(i+=" translate3d(0px,0px,0px)"),"translate3d"!=n){var r={x:"$1",y:"$2",z:"$3"},a={"translate3d-x":"x","translate3d-y":"y","translate3d-z":"z"};r[a[n]]=t,t=r}i=i.replace(/translate3d\(([^,]*)px,([^,]*)px,([^,]*)px\)/,"translate3d("+t.x+"px,"+t.y+"px,"+t.z+"px)");break;case"translate":case"translate-x":case"translate-y":if(/translate\([^)]*\)/.test(i)||(i+=" translate(0px,0px)"),"translate"!=n){var r={x:"$1",y:"$2"},a={"translate3d-x":"x","translate3d-y":"y"};r[a[n]]=t,t=r}i=i.replace(/translate\(([^,]*)px,([^,]*)px\)/,"translate("+t.x+"px,"+t.y+"px)");break;case"scale":i=/scale\([^)]*\)/.test(i)?i.replace(/scale\([^)]*\)/,"scale("+t+")"):i+" scale("+t+")";break;case"rotate":i=/rotate\([^)]*\)/.test(i)?i.replace(/rotate\([^)]*\)/,"rotate("+t+"deg)"):i+" rotate("+t+"deg)";break;default:i=t}e.style[at]=i},T=function(e,t){var n=e.style[at]||"scale(1) translate(0px, 0px) translate3d(0px, 0px, 0px) rotate(0deg)";switch(t){case"scale":n=/scale\(([^)]*)\)/.exec(n),n=n?Number(n[1]):1;break;case"translate3d":case"translate3d-x":case"translate3d-y":case"translate3d-z":if(n=/translate3d\(([^,]*)px,([^,]*)px,([^,]*)px\)/.exec(n)||[0,0,0,0],"translate3d"!=t){var i={"translate3d-x":1,"translate3d-y":2,"translate3d-z":3};n=Number(n[i[t]])}else n={x:Number(n[1]),y:Number(n[2]),z:Number(n[3])};break;case"translate":case"translate-x":case"translate-y":if(n=/translate\(([^,]*)px,([^,]*)px\)/.exec(n)||[0,0,0],"translate"!=t){var i={"translate-x":1,"translate-y":2};n=Number(n[i[t]])}else n={x:Number(n[1]),y:Number(n[2])};break;case"rotate":n=/rotate\(([^)]*)deg\)/.exec(n),n=n?Number(n[1]):0;break;default:}return n},_=function(t){var n=0,i=0;if(t)if(document.documentElement.getBoundingClientRect&&t.getBoundingClientRect){var r={left:0,top:0,right:0,bottom:0};try{r=t.getBoundingClientRect()}catch(a){return[0,0]}var s=t.ownerDocument,o=e.browser.ie?2:0;n=r.top-o+H(s),i=r.left-o+N(s)}else for(;t.offsetParent;)n+=t.offsetTop,i+=t.offsetLeft,t=t.offsetParent;return[i,n]},O=function(e,t,n){t=parseInt(t)+N(),n=parseInt(n)+H(),Y(e,t,n)},X=function(e){var t=_(e);return t[0]=t[0]+N(),t[1]=t[1]+H(),t},Y=function(e,t,n){var i=parseInt(y(e,"marginLeft"))||0,r=parseInt(y(e,"marginTop"))||0;A(e,"left",parseInt(t)-i+"px"),A(e,"top",parseInt(n)-r+"px")},F=function(e,t){var n=X(e),i=X(t),r=[];return r[0]=n[0]-i[0],r[1]=n[1]-i[1],r};var st=function(e){return e&&"auto"!=e?parseInt(e.substr(0,e.length-2)):0};W=function(e){return st(t.getStyle(e,"left"))},V=function(e){return st(t.getStyle(e,"top"))},z=function(e){return st(t.getStyle(e,"width"))},G=function(e){return st(t.getStyle(e,"height"))},Q=function(e){e=e||window;var t=e.document;return e.getSelection?""+e.getSelection():t.getSelection?t.getSelection():t.selection?t.selection.createRange().text:void 0},U=function(e){if(void 0!=e.selectionStart&&void 0!=e.selectionEnd){var t=e.selectionStart,n=e.selectionEnd;return e.value.substring(t,n)}return""},q=function(e,t,n){if(!n&&e===t)return!1;if(e.compareDocumentPosition){var i=e.compareDocumentPosition(t);if(20==i||0==i)return!0}else if(e.contains(t))return!0;return!1},K=function(e){var t;return t=n.ie&&7>=n.ie?e.getAttribute("href",4):e.href,t||null};for(var ot=a("script"),lt=0;ot.length>lt;lt++)"true"==ot[lt].getAttribute("hasJx")&&(e.src=ot[lt].src);e.src||(e.src=ot[ot.length-1].src),e.filename=e.src.replace(/(.*\/){0,}([^\\]+).*/gi,"$2"),e.path=e.src.split(e.filename)[0],t.getDoc=J,t.id=i,t.name=r,t.tagName=a,t.getText=s,t.getAttributeByParent=o,t.node=l,t.xnode=c,t.setClass=d,t.getClass=u,t.hasClass=h,t.addClass=p,t.removeClass=f,t.toggleClass=m,t.replaceClass=g,t.createStyleNode=v,t.setStyle=A,t.getStyle=y,t.addStyles=addStyles,t.setCssText=b,t.getCssText=x,t.addCssText=w,t.show=S,t.isShow=P,t.recover=E,t.hide=C,t.setTransform=k,t.getTransform=T,t.getScrollLeft=N,t.getScrollTop=H,t.getScrollHeight=R,t.getScrollWidth=B,t.getClientHeight=M,t.getClientWidth=I,t.getOffsetHeight=L,t.getOffsetWidth=D,t.getClientXY=_,t.setClientXY=O,t.getXY=X,t.setXY=Y,t.getRelativeXY=F,t.getPosX=W,t.getPosY=V,t.getWidth=z,t.getHeight=G,t.getSelection=j,t.getSelectionText=Q,t.getTextFieldSelection=U,t.getDocumentElement=et,t.getDocHead=nt,t.contains=q,t.getHref=K}),Jx().$package(function(e){var t=function(){function e(d,u){u=u||document;var h=/^[\w\-_#]+$/.test(d);if(!h&&u.querySelectorAll)return t(u.querySelectorAll(d));if(d.indexOf(",")>-1){for(var p=d.split(/,/g),f=[],m=0,g=p.length;g>m;++m)f=f.concat(e(p[m],u));return c(f)}var v,A=d.match(r),y=A.pop(),b=(y.match(s)||l)[1],x=!b&&(y.match(a)||l)[1],w=!b&&(y.match(o)||l)[1];if(x&&!w&&u.getElementsByClassName)v=t(u.getElementsByClassName(x));else if(v=!b&&t(u.getElementsByTagName(w||"*")),x&&(v=i(v,"className",RegExp("(^|\\s)"+x+"(\\s|$)"))),b){var S=u.getElementById(b);return S?[S]:[]}return A[0]&&v[0]?n(A,v):v}function t(e){try{return Array.prototype.slice.call(e)}catch(t){for(var n=[],i=0,r=e.length;r>i;++i)n[i]=e[i];return n}}function n(e,t,i){var r=e.pop();if(">"===r)return n(e,t,!0);var c,d,u,h=[],p=-1,f=(r.match(s)||l)[1],m=!f&&(r.match(a)||l)[1],g=!f&&(r.match(o)||l)[1],v=-1;for(g=g&&g.toLowerCase();c=t[++v];){d=c.parentNode;do if(u=!g||"*"===g||g===d.nodeName.toLowerCase(),u=u&&(!f||d.id===f),u=u&&(!m||RegExp("(^|\\s)"+m+"(\\s|$)").test(d.className)),i||u)break;while(d=d.parentNode);u&&(h[++p]=c)}return e[0]&&h[0]?n(e,h):h}function i(e,t,n){for(var i,r=-1,a=-1,s=[];i=e[++r];)n.test(i[t])&&(s[++a]=i);return s}var r=/(?:[\w\-\\.#]+)+(?:\[\w+?=([\'"])?(?:\\\1|.)+?\1\])?|\*|>/gi,a=/^(?:[\w\-_]+)?\.([\w\-_]+)/,s=/^(?:[\w\-_]+)?#([\w\-_]+)/,o=/^([\w\*\-_]+)/,l=[null,null],c=function(){var e=+new Date,t=function(){var t=1;return function(n){var i=n[e],r=t++;return i?!1:(n[e]=r,!0)}}();return function(n){for(var i,r=n.length,a=[],s=-1,o=0;r>o;++o)i=n[o],t(i)&&(a[++s]=i);return e+=1,a}}();return e}();e.dom.mini=t}),Jx().$package(function(e){var t,n,i,r,a,s,o,l,c,d,u,h,p,f,m=[];e.event=e.event||{},t=e.event,f=function(t,n){t||(t=window.event);var n=n||t.srcElement,i=document,r=i.documentElement,a=i.body,s={_event:t,type:t.type,target:t.srcElement,currentTarget:n,relatedTarget:t.fromElement?t.fromElement:t.toElement,eventPhase:t.srcElement==n?2:3,clientX:t.clientX,clientY:t.clientY,screenX:t.screenX,screenY:t.screenY,layerX:t.offsetX,layerY:t.offsetY,pageX:t.clientX+(r&&r.scrollLeft||a&&a.scrollLeft||0)-(r&&r.clientLeft||a&&a.clientLeft||0),pageY:t.clientY+(r&&r.scrollTop||a&&a.scrollTop||0)-(r&&r.clientTop||a&&a.clientTop||0),wheelDelta:t.wheelDelta,altKey:t.altKey,ctrlKey:t.ctrlKey,shiftKey:t.shiftKey,charCode:t.keyCode,keyCode:t.keyCode,stopPropagation:function(){this._event.cancelBubble=!0},preventDefault:function(){this._event.returnValue=!1}},o=t.type.toLowerCase();if("mouseover"==o?s.relatedTarget=t.fromElement:"mouseout"==o&&(s.relatedTarget=t.toElement),!e.isUndefined(t.button)){var l=t.button,c={0:-1,1:0,2:2,3:-1,4:1};s.button=e.isUndefined(c[l])?l:c[l]}return s},e.browser.ie?(n=function(e,t,n,r){return s["on"+t]?(s["on"+t](e,t,n,r),void 0):(i(e,t,n),void 0)},i=function(e,n,i){if(-1==t._find(arguments)){var r=function(t){var n=f(t,e);Function.prototype.call?i.call(e,n):(e._currentHandler=i,e._currentHandler(n),e._currentHandler=null)};e.attachEvent("on"+n,r);var a={element:e,eventType:n,handler:i,wrappedEvent:r},s=e.document||e,o=s.parentWindow||window,l=t._uid();o._allHandlers||(o._allHandlers={}),o._allHandlers[l]=a,e._handlers||(e._handlers=[]),e._handlers.push(l),o._onunloadEventRegistered||(o._onunloadEventRegistered=!0,o.attachEvent("onunload",t._removeAllEvents))}},r=function(e,t,n){return s["off"+t]?(s["off"+t](e,t,n),void 0):(3==arguments.length?a(e,t,n):a(e,t),void 0)},a=function(e){var n=t._find(arguments);if(-1!=n){for(var i=e.document||e,r=i.parentWindow||window,a=0;n.length>a;a++){var s=n[a],o=e._handlers[s],l=r._allHandlers[o];e.detachEvent("on"+l.eventType,l.wrappedEvent),e._handlers[s]=null,e._handlers.splice(s,1),delete r._allHandlers[o]}e._handlers&&0==e._handlers.length&&(e._handlers=null)}},t._find=function(e){var t=e[0],n=e[1],i=e[2],r=t._handlers;if(!r)return-1;var a=t.document||t,s=a.parentWindow||window,o=[];if(3===e.length)for(var l=r.length-1;l>=0;l--){var c=r[l],d=s._allHandlers[c];if(d.eventType==n&&d.handler==i)return o.push(l),o}else if(2===e.length){for(var l=r.length-1;l>=0;l--){var c=r[l],d=s._allHandlers[c];d.eventType==n&&o.push(l)}if(o.length>0)return o}else if(1===e.length){for(var l=r.length-1;l>=0;l--)o.push(l);if(o.length>0)return o}return-1},t._removeAllEvents=function(){var e,t=this;for(e in t._allHandlers){var n=t._allHandlers[e];n.element.detachEvent("on"+n.eventType,n.wrappedEvent),n.element._handlers=null,delete t._allHandlers[e]}},t._counter=0,t._uid=function(){return"h"+t._counter++}):document.addEventListener&&(n=function(e,t,n,r){return s["on"+t]?(s["on"+t](e,t,n,r),void 0):(i(e,t,n),void 0)},i=function(t,n,i){var r=!1;t||e.out("targetModel undefined:"+n+i),t._eventTypes||(t._eventTypes={}),t._eventTypes[n]||(t._eventTypes[n]=[]),t.addEventListener(n,i,!1);for(var a=t._eventTypes[n],s=0;a.length>s;s++)if(a[s]==i){r=!0;break}r||a.push(i)},r=function(e,t,n){return s["off"+t]?(s["off"+t](e,t,n),void 0):(3==arguments.length?a(e,t,n):a(e,t),void 0)},a=function(e,t,n){if(t){if(3==arguments.length){if(n&&(e.removeEventListener(t,n,!1),e._eventTypes&&e._eventTypes[t]))for(var i=e._eventTypes[t],r=0;i.length>r;r++)if(i[r]===n){i[r]=null,i.splice(r,1);break}}else if(e._eventTypes&&e._eventTypes[t]){for(var i=e._eventTypes[t],r=0;i.length>r;r++)e.removeEventListener(t,i[r],!1);e._eventTypes[t]=[]}}else if(e._eventTypes){var a=e._eventTypes;for(var s in a)for(var i=e._eventTypes[s],r=0;i.length>r;r++)e.removeEventListener(s,i[r],!1);a={}}}),s={ondrag:function(n,i,r){var a,s,o,l=!1,c=function(i){if(e.browser.mobileSafari||0===i.button){var r;o=i,e.browser.mobileSafari?(i.stopPropagation(),r=i.touches[0],a=r.pageX,s=r.pageY):(i.stopPropagation(),i.preventDefault(),a=i.clientX,s=i.clientY),l=!1,e.browser.mobileSafari?(t.addEventListener(document,"touchmove",d),t.addEventListener(n,"touchend",u)):t.addEventListener(document,"mousemove",d)}},d=function(i){if(e.browser.mobileSafari||0===i.button){var c,h,p;i.stopPropagation(),e.browser.mobileSafari?(p=i.changedTouches[0],c=p.pageX,h=p.pageY):(c=i.clientX,h=i.clientY),Math.abs(a-c)+Math.abs(s-h)>2&&(e.browser.mobileSafari?(t.removeEventListener(document,"touchmove",d),t.removeEventListener(n,"touchend",u)):t.removeEventListener(document,"mousemove",d),l||(r.call(n,i,o),l=!0))}},u=function(n){(e.browser.mobileSafari||0===n.button)&&(e.browser.mobileSafari?(t.removeEventListener(document,"touchmove",d),l&&(n.stopPropagation(),n.preventDefault())):t.removeEventListener(document,"mousemove",d))};e.browser.mobileSafari?t.addEventListener(n,"touchstart",c):(t.addEventListener(n,"mousedown",c),t.addEventListener(n,"mouseup",u)),m.push({element:n,eventType:i,handler:r,actions:[c,u]})},offdrag:function(n,i,r){for(var a in m)if(m[a].handler==r&&m[a].element==n&&m[a].eventType==i){e.browser.mobileSafari?(t.removeEventListener(n,"touchstart",m[a].actions[0]),t.removeEventListener(n,"touchend",m[a].actions[1])):(t.removeEventListener(n,"mousedown",m[a].actions[0]),t.removeEventListener(n,"mouseup",m[a].actions[1])),m.splice(a,1);break}},oncustomclick:function(n,i,r,a){var s,o,l,c=!1,d=!1,u=0,a=a?a:{},h=a.longtouchable,p=-1,f=function(i){if(u=i.timeStamp,c=!1,e.browser.mobileSafari||0===i.button){var a;e.browser.mobileSafari?(a=i.changedTouches[0],s=a.pageX,o=a.pageY):(s=i.clientX,o=i.clientY),d=!1,h&&(l=setTimeout(function(){if(!c&&!d){var a=2e3;e.browser.mobileSafari?(t.removeEventListener(n,"touchmove",v),t.removeOriginalEventListener(n,"touchend",A)):(t.removeEventListener(n,"mousemove",v),t.removeOriginalEventListener(n,"click",A)),r.call(n,i,a)}},1e3)),e.browser.mobileSafari?(t.addEventListener(n,"touchmove",v),t.addOriginalEventListener(n,"touchend",A)):(t.addEventListener(n,"mousemove",v),t.addOriginalEventListener(n,"click",A))}},g=function(t){p=t.button,(e.browser.mobileSafari||0===t.button)&&e.browser.mobileSafari&&(touch=t.changedTouches[0],touch.pageX,touch.pageY)},v=function(i){if(e.browser.mobileSafari){touch=i.changedTouches[0];var r=touch.pageX,a=touch.pageY}else var r=i.clientX,a=i.clientY;c=Math.abs(s-r)+Math.abs(o-a)>1,c&&(clearTimeout(l),l=null,e.browser.mobileSafari?(t.removeEventListener(n,"touchmove",v),t.removeOriginalEventListener(n,"touchend",A)):(t.removeEventListener(n,"mousemove",v),t.removeOriginalEventListener(n,"click",A)))},A=function(t){if(clearTimeout(l),l=null,d=!0,e.browser.mobileSafari||0===p){var i,a=0;if(e.browser.mobileSafari){i=t.changedTouches[0];var u=i.pageX,h=i.pageY}else var u=t.clientX,h=t.clientY;1>Math.abs(s-u)+Math.abs(o-h)&&(c=!1,r.call(n,t,a))}};e.browser.mobileSafari?t.addEventListener(n,"touchstart",f):(t.addEventListener(n,"mousedown",f),t.addEventListener(n,"mouseup",g)),m.push({element:n,eventType:i,handler:r,actions:[f,v,g,A]})},offcustomclick:function(n,i,r){for(var a in m)if(m[a].handler==r&&m[a].element==n&&m[a].eventType==i){e.browser.mobileSafari?(t.removeEventListener(n,"touchstart",m[a].actions[0]),t.removeEventListener(n,"touchmove",m[a].actions[1]),t.removeOriginalEventListener(n,"touchend",m[a].actions[3])):(t.removeEventListener(n,"mousedown",m[a].actions[0]),t.removeEventListener(n,"mousemove",m[a].actions[1]),t.removeEventListener(n,"mouseup",m[a].actions[2]),t.removeOriginalEventListener(n,"click",m[a].actions[3])),m.splice(a,1);break}},oncontextmenu:function(n,i,r){if(9==e.browser.ie){var a=function(e){var t=f(e,n);r.call(n,t)};n.attachEvent("oncontextmenu",a),m.push({element:n,eventType:i,handler:r,actions:[a]})}else t.addOriginalEventListener(n,i,r)},offcontextmenu:function(n,i,r){if(9==e.browser.ie){for(var a in m)if(m[a].handler==r&&m[a].element==n&&m[a].eventType==i){n.detachEvent("oncontextmenu",m[a].actions[0]),m.splice(a,1);break}}else t.removeOriginalEventListener(n,i,r)},onmousewheel:function(n,i,r){if(e.browser.firefox){var a=function(e){e.wheelDelta=-40*e.detail,r.call(n,e)};t.addOriginalEventListener(n,"DOMMouseScroll",a),m.push({element:n,eventType:i,handler:r,actions:[a]})}else t.addOriginalEventListener(n,"mousewheel",r)},offmousewheel:function(n,i,r){if(e.browser.firefox){for(var a in m)if(m[a].handler==r&&m[a].element==n&&m[a].eventType==i){t.removeOriginalEventListener(n,"DOMMouseScroll",m[a].actions[0]),m.splice(a,1);break}}else t.removeOriginalEventListener(n,"mousewheel",r)},onmouseenter:function(e,n,i){var r=function(e){var t=e.relatedTarget;if(t)if(this.compareDocumentPosition){var n=this.compareDocumentPosition(t);t!=this&&20!=n&&0!=n&&i.call(this,e)}else t==this||this.contains(t)||i.call(this,e);else i.call(this,e)};t.addEventListener(e,"mouseover",r),m.push({element:e,eventType:n,handler:i,actions:[r]})},offmouseenter:function(e,n,i){for(var r in m)if(m[r].handler==i&&m[r].element==e&&m[r].eventType==n){t.removeEventListener(e,"mouseover",m[r].actions[0]),m.splice(r,1);break}},onmouseleave:function(e,n,i){var r=function(e){var t=e.relatedTarget;if(t)if(this.compareDocumentPosition){var n=this.compareDocumentPosition(t);20!=n&&0!=n&&i.call(this,e)}else this.contains(t)||i.call(this,e);else i.call(this,e)};t.addEventListener(e,"mouseout",r),m.push({element:e,eventType:n,handler:i,actions:[r]})},offmouseleave:function(e,n,i){for(var r in m)if(m[r].handler==i&&m[r].element==e&&m[r].eventType==n){t.removeEventListener(e,"mouseout",m[r].actions[0]),m.splice(r,1);break}},oninput:function(n,i,r){if(e.browser.ie){var a=function(e){if("value"==e.propertyName.toLowerCase()){var t=f(e,n);r.call(n,t)}};n.attachEvent("onpropertychange",a),m.push({element:n,eventType:i,handler:r,actions:[a]}),9==e.browser.ie&&t.addOriginalEventListener(n,"change",r)}else t.addOriginalEventListener(n,"input",r)},offinput:function(n,i,r){if(e.browser.ie){for(var a in m)if(m[a].handler==r&&m[a].element==n&&m[a].eventType==i){n.detachEvent("onpropertychange",m[a].actions[0]),m.splice(a,1);break}9==e.browser.ie&&t.removeOriginalEventListener(n,"change",r)}else t.removeOriginalEventListener(n,"input",r)}},o=function(e){return o.done?e():(o.timer?o.ready.push(e):(o.ready=[e],t.on(window,"load",l),o.timer=window.setInterval(l,300)),void 0)},l=function(){if(o.done)return!0;if(document&&document.getElementsByTagName&&document.getElementById&&document.body){o.done=!0,window.clearInterval(o.timer),o.timer=null;for(var e=0;o.ready.length>e;e++)o.ready[e]();return o.ready=null,!0}},c=function(){this.subscribers=[]},c.prototype.subscribe=function(t){var n=e.array.some(this.subscribers,function(e){return e===t});return n||this.subscribers.push(t),t},c.prototype.deliver=function(t){e.array.forEach(this.subscribers,function(e){e(t)})},c.prototype.unsubscribe=function(t){return this.subscribers=e.array.filter(this.subscribers,function(e){return e!==t}),t},d=function(t,n,i){var r,a,s,o;if(i){for(n="on"+n,t._$events||(t._$events={}),t._$events[n]?0==t._$events[n].length&&(t._$events[n]=[]):t._$events[n]=[],r=t._$events[n],a=r.length,s=-1,o=0;a>o;o++){var l=r[o];if(l==i){s=o;break}}-1===s&&r.push(i)}else e.out(">>> 添加的观察者方法不存在："+t+n+i)},u=function(e){var t=e.targetModel,n=e.eventMapping;for(var i in n)d(t,i,n[i])};var g=function(e){return[].slice.call(e)};h=function(e,t){var n,i,r;t="on"+t;var a=!0;if(e._$events&&e._$events[t]&&(n=e._$events[t],n.length>0))for(i=g(arguments).slice(2),r=0;n.length>r;r++)n[r].apply(e,i)===!1&&(a=!1);return a},p=function(e,t,n){var i,r,a,s=!1,o=e._$events;if(n){if(o&&(t="on"+t,r=o[t]))for(a=r.length,i=0;a>i;i++)if(r[i]==n){r[i]=null,r.splice(i,1),s=!0;break}}else if(t){if(o&&(t="on"+t,r=o[t])){for(a=r.length,i=0;a>i;i++)r[i]=null;delete o[t],s=!0}}else if(e&&o){for(i in o)delete o[i];delete e._$events,s=!0}return s},t.addEventListener=n,t.removeEventListener=r,t.addOriginalEventListener=i,t.removeOriginalEventListener=a,t.on=t.addEventListener,t.off=t.removeEventListener,t.onDomReady=o,t.Publish=c,t.customEvent=s,t.customEventHandlers=m,t.addObserver=d,t.addObservers=u,t.notifyObservers=h,t.removeObserver=p}),Jx().$package(function(e){var t=window.location.host;e.cookie={set:function(e,n,i,r,a){if(a){var s=new Date,o=new Date;o.setTime(s.getTime()+36e5*a)}return window.document.cookie=e+"="+n+"; "+(a?"expires="+o.toGMTString()+"; ":"")+(r?"path="+r+"; ":"path=/; ")+(i?"domain="+i+";":"domain="+t+";"),!0},get:function(e){var t=RegExp("(?:^|;+|\\s+)"+e+"=([^;]*)"),n=window.document.cookie.match(t);return n?n[1]:""},remove:function(e,n,i){window.document.cookie=e+"=; expires=Mon, 26 Jul 1997 05:00:00 GMT; "+(i?"path="+i+"; ":"path=/; ")+(n?"domain="+n+";":"domain="+t+";")}}}),Jx().$package(function(e){e.localStorage={setItem:function(e,t){this.isSupports()&&window.localStorage.setItem(e,t)},getItem:function(e){return this.isSupports()?window.localStorage.getItem(e):null},removeItem:function(e){this.isSupports()&&window.localStorage.removeItem(e)},clear:function(){this.isSupports()&&window.localStorage.clear()},isSupports:function(){return"localStorage"in window&&null!==window.localStorage}}}),Jx().$package(function(e){e.array=e.array||{};var t,n,i,r,a,s,o,l,c,d,u,h,p,f,m,g,v,A,y,b=e.array;t=Array.prototype.indexOf?function(){var e=Array.prototype.slice.call(arguments,1);return Array.prototype.indexOf.apply(arguments[0],e)}:function(e,t,n){null==n?n=0:0>n&&(n=Math.max(0,e.length+n));for(var i=n;e.length>i;i++)if(e[i]===t)return i;return-1},n=Array.prototype.lastIndexOf?function(){var e=Array.prototype.slice.call(arguments,1);return Array.prototype.lastIndexOf.apply(arguments[0],e)}:function(e,t,n){null==n?n=e.length-1:0>n&&(n=Math.max(0,e.length+n));for(var i=n;i>=0;i--)if(e[i]===t)return i;return-1},i=Array.prototype.forEach?function(){var e=Array.prototype.slice.call(arguments,1);return Array.prototype.forEach.apply(arguments[0],e)}:function(e,t){var n=e.length;if("function"!=typeof t)throw new TypeError;for(var i=arguments[2],r=0;n>r;r++)r in e&&t.call(i,e[r],r,e)},r=Array.prototype.filter?function(){var e=Array.prototype.slice.call(arguments,1);return Array.prototype.filter.apply(arguments[0],e)}:function(e,t){var n=e.length;if("function"!=typeof t)throw new TypeError;for(var i=[],r=arguments[2],a=0;n>a;a++)if(a in e){var s=e[a];t.call(r,s,a,e)&&i.push(s)}return i},a=Array.prototype.some?function(){var e=Array.prototype.slice.call(arguments,1);return Array.prototype.some.apply(arguments[0],e)}:function(e,t){var n=e.length;if("function"!=typeof t)throw new TypeError;for(var i=arguments[2],r=0;n>r;r++)if(r in e&&t.call(i,e[r],r,e))return!0;return!1},s=Array.prototype.map?function(){var e=Array.prototype.slice.call(arguments,1);return Array.prototype.map.apply(arguments[0],e)}:function(e,t){var n=e.length;if("function"!=typeof t)throw new TypeError;for(var i=Array(n),r=arguments[2],a=0;n>a;a++)a in e&&(i[a]=t.call(r,e[a],a,e));return i},o=Array.prototype.every?function(){var e=Array.prototype.slice.call(arguments,1);return Array.prototype.every.apply(arguments[0],e)}:function(e,t){var n=e.length;if("function"!=typeof t)throw new TypeError;for(var i=arguments[2],r=0;n>r;r++)if(r in e&&!t.call(i,e[r],r,e))return!1;return!0},l=Array.prototype.reduce?function(){var e=Array.prototype.slice.call(arguments,1);return Array.prototype.reduce.apply(arguments[0],e)}:function(e,t){var n=e.length>>>0;if("function"!=typeof t)throw new TypeError;if(0==n&&2==arguments.length)throw new TypeError;var i=0;if(arguments.length>=3)var r=arguments[2];else for(;;){if(i in e){r=e[i++];break}if(++i>=n)throw new TypeError}for(;n>i;i++)i in e&&(r=t.call(null,r,e[i],i,e));return r},c=Array.prototype.reduceRight?function(){var e=Array.prototype.slice.call(arguments,1);return Array.prototype.reduceRight.apply(arguments[0],e)}:function(e,t){var n=e.length>>>0;if("function"!=typeof t)throw new TypeError;if(0==n&&2==arguments.length)throw new TypeError;var i=n-1;if(arguments.length>=3)var r=arguments[2];else for(;;){if(i in e){r=e[i--];break}if(0>--i)throw new TypeError}for(;i>=0;i--)i in e&&(r=t.call(null,r,e[i],i,e));return r},d=function(t){var n=e.$typeof(t);return n?"array"!=n&&"arguments"!=n?[t]:t:[]},u=function(e,t){var n,i,t=d(t),r=!1;for(n=0;t.length>n;n++)for(i=0;e.length>i;i++)e[i]===t[n]&&(e.splice(i,1),r=!0);return r},h=function(e,t,n){var i;for(i=0;e.length>i;ij++)if(e[i]===t)return e[i]=n,!0;return!1},p=function(e,t){t=t||function(e,t){return e-t};for(var n,i,r=e.length,a=0;r-1>a;a++){i=!1;for(var s=r-1;s>a;s--)0>t(e[s],e[s-1])&&(i=!0,n=e[s-1],e[s-1]=e[s],e[s]=n);if(!i)break}return e},f=function(e,t,n){for(var i=0,r=e.length,a=Math.floor(e.length/2);r!=a;)n(t,e[a])>0?i=a+1:r=a,a=Math.floor((i+r)/2);return a},m=function(e,n){return t(e,n)>-1},g=function(e){for(var t=[],n=0,i=e.length;i>n;n++)m(t,e[n])||t.push(e[n]);return t},v=function(e,t){for(var n=[],i=0,r=e.length;r>i;i++)m(t,e[i])&&n.push(e[i]);return n},A=function(e,t){for(var n=[],i=0,r=e.length;r>i;i++)m(t,e[i])||n.push(e[i]);return n},y=function(e,t){return g(e.concat(t))},b.indexOf=t,b.lastIndexOf=n,b.forEach=i,b.filter=r,b.some=a,b.map=s,b.every=o,b.reduce=l,b.reduceRight=c,b.toArray=d,b.remove=u,b.replace=h,b.bubbleSort=p,b.binarySearch=f,b.contains=m,b.uniquelize=g,b.intersect=v,b.minus=A,b.union=y}),Jx().$package(function(e){var t,n,i,r,a,s,o=e.dom.id,l=e.dom,c=e.event;window.XMLHttpRequest===void 0&&(window.XMLHttpRequest=function(){return new window.ActiveXObject(navigator.userAgent.indexOf("MSIE 5")>=0?"Microsoft.XMLHTTP":"Msxml2.XMLHTTP")}),e.http=e.http||{},t=function(e,t){var n,i,r,a=!1,s=!1;return t={method:t.method||"GET",data:t.data||null,arguments:t.arguments||null,onSuccess:t.onSuccess||function(){},onError:t.onError||function(){},onComplete:t.onComplete||function(){},onTimeout:t.onTimeout||function(){},isAsync:t.isAsync||!0,timeout:t.timeout?t.timeout:3e4,contentType:t.contentType?t.contentType:"utf-8",type:t.type||"xml"},e=e||"",r=t.timeout,n=new window.XMLHttpRequest,n.open(t.method,e,t.isAsync),n.setRequestHeader("Content-Type",t.contentType),n.setRequestHeader("X-Requested-With","XMLHttpRequest"),i=function(e){try{return!e.status&&"file:"==location.protocol||e.status>=200&&300>e.status||304==e.status||navigator.userAgent.indexOf("Safari")>-1&&e.status===void 0}catch(t){}return!1},n.onreadystatechange=function(){if(4==n.readyState){if(!a){var r={};r.responseText=n.responseText,r.responseXML=n.responseXML,r.data=t.data,r.status=n.status,r.uri=e,r.arguments=t.arguments,i(n)?("script"===t.type&&eval.call(window,data),t.onSuccess(r)):t.onError(r),t.onComplete(r)}s=!0,n=null}},n.send(t.data),window.setTimeout(function(){var n;s||(a=!0,n={},n.uri=e,n.arguments=t.arguments,t.onTimeout(n),t.onComplete(n))},r),n},n=function(t,n){t=t||"",n={method:n.method||"GET",data:n.data||null,arguments:n.arguments||null,callback:n.callback||function(){},onLoad:n.onLoad||function(){},contentType:n.contentType?n.contentType:"utf-8"};var i;if(e.browser.ie){var r=new ActiveXObject("htmlfile");r.open(),r.close();var a=r.createElement("div");r.appendChild(a),r.parentWindow._parent=self,a.innerHTML='<iframe id="_cometIframe" src="'+t+"?callback=window.parent._parent."+n.callback+'"></iframe>',i=r.getElementById("_cometIframe")}else i=l.node("iframe"),i.setAttribute("id","_cometIframe"),i.setAttribute("src",t+"?callback=window.parent._parent."+n.callback),i.style.position="absolute",i.style.visibility="hidden",i.style.left=i.style.top="-999px",i.style.width=i.style.height="1px",document.body.appendChild(i),self._parent=self;
return c.on(i,"load",n.onLoad),i},i=function(t,n,r){var a,s,d,u,h,p,f,m,g=document.getElementsByTagName("head")?document.getElementsByTagName("head")[0]:document.documentElement,v=!1,A=!1,r=r||{},y=r.isDefer||!1,b=r.query||null,x=r.arguments||null,w=r.onSuccess||function(){},S=r.onError||function(){},P=r.onComplete||function(){},E=r.onTimeout||function(){},C=r.timeout,k=r.charset?r.charset:"utf-8",T=r.win||window;n=n||"",null!==b&&(n=n+"?"+b),m=function(){return i.Id++},u=m(),p=function(e){var t=o("jet_load_"+e);t&&g.removeChild(t)},s=function(e,t,n){var i=n||"utf-8";return l.node("link",{id:"jet_load_"+u,type:"text/css",charset:i,rel:"stylesheet",href:e},t)},d=function(e,t,n,i){var r=n||"utf-8",a=l.node("script",{id:"jet_load_"+u,type:"text/javascript",charset:r,src:e},t);return i&&a.setAttribute("defer","defer"),a},"script"===t?a=r.node||d(n,T,k,y):"css"===t&&(a=r.node||s(n,T,k)),e.browser.engine.trident&&9>parseInt(e.browser.ie)?a.onreadystatechange=function(){var e=this.readyState;("loaded"===e||"complete"===e)&&(a.onreadystatechange=null,v||(A=!0,window.clearTimeout(h),h=null,f={},f.id=u,f.uri=n,f.arguments=x,w(f),P(f)))}:e.browser.engine.webkit?c.on(a,"load",function(){var e;v||(A=!0,window.clearTimeout(h),h=null,e={},e.id=u,e.uri=n,e.arguments=x,w(e),P(e),"script"===t&&p(u))}):(a.onload=function(){var e;v||(A=!0,window.clearTimeout(h),h=null,e={},e.id=u,e.uri=n,e.arguments=r.arguments,w(e),P(e),"script"===t&&p(u))},a.onerror=function(e){var t;v||(A=!0,window.clearTimeout(h),h=null,t={},t.id=u,t.uri=n,t.arguments=x,t.error=e,S(t),P(t),p(u))}),r.node?"script"===t?a.src=n:"css"===t&&(a.href=n):g.appendChild(a),"script"===t&&C&&(h=window.setTimeout(function(){var e;A||(v=!0,e={},e.uri=n,e.arguments=x,E(e),P(e),p(u))},C));var R=function(e){this._node=e,this._head=g};return R.prototype={abort:function(){this._node.src="",this._head.removeChild(this._node),delete this._node}},new R(a)},i.Id=0,r=function(e,t){return i("css",e,t)},a=function(e,t){return i("script",e,t)};var d,u={_iframes:[],_tick:0,_select:function(){return this._tick++,this._iframes[(this._tick-1)%this._len]},init:function(e){if(1!=this._isInit){this._len=e;for(var t=document.body,n=0;e>n;n++)d=l.node("div",{"class":"RPCService_hDiv"}),l.hide(d),d.innerHTML='<iframe id="RPCService_hIframe_'+n+'" name="RPCService_hIframe_'+n+'" src="'+alloy.CONST.MAIN_URL+'domain.html"></iframe>',t.appendChild(d),this._iframes[n]=[d,null,"RPCService_hIframe_"+n];this._isInit=!0}},take:function(e){var t=this._select();t[1]&&t[0].removeChild(t[1]),e.setAttribute("target",t[2]),t[1]=e,t[0].appendChild(e)}};s=function(e,t){u.init(2);var n={method:t.method||"GET",enctype:t.enctype||"",data:t.data||{},onSuccess:t.onSuccess||function(){},onError:t.onError||function(){},onComplete:t.onComplete||function(){},onTimeout:t.onTimeout||function(){},timeout:t.timeout?t.timeout:1e4},i=l.node("form",{"class":"RPCService_form",method:n.method,action:e+"?t="+(new Date).getTime(),enctype:n.enctype});if(Object.prototype.toString.call(n.data).indexOf("String")>-1){var r=l.node("input");r.type="text",r.name=n.data,i.appendChild(r)}else for(var a in n.data){var r=l.node("input");r.type="text",r.name=a,r.setAttribute("value",n.data[a]),i.appendChild(r)}u.take(i),i.submit()},e.http.ajax=t,e.http.comet=n,e.http.load=i,e.http.loadCss=r,e.http.loadScript=a,e.http.formSend=s}),Jx().$package(function(e){e.string=e.string||{};var t,n,i,r,a,s,o,l,c,d,u,h,p,f,m,g,v,A,y,b,x,w,S,P,E,C,k,T,R,B,M,I,L,D,N,H,_,O,X,Y,F,W,V,z,G,j=e.string;t=function(e){return e+""};var Q={};n=function(e,t){var i=/\W/.test(e)?Function("obj","var p=[],print=function(){p.push.apply(p,arguments);};with(obj){p.push('"+e.replace(/[\r\t\n]/g," ").split("<%").join("	").replace(/((^|%>)[^\t]*)'/g,"$1\r").replace(/\t=(.*?)%>/g,"',$1,'").split("	").join("');").split("%>").join("p.push('").split("\r").join("\\'")+"');}return p.join('');"):Q[e]=Q[e]||n(document.getElementById(e).innerHTML);return t?i(t):i},i=function(e){return i.RE.test(e)},i.RE=/^(?:ht|f)tp(?:s)?\:\/\/(?:[\w\-\.]+)\.\w+/i,r=function(e){var t=null;if(null!==(t=r.RE.exec(e))){for(var n={},i=0,a=r.SPEC.length;a>i;i++){var s=r.SPEC[i];n[s]=t[i+1]}t=n,n=null}return t},a=function(e){for(var t="",n={},i={},a=0,s=r.SPEC.length;s>a;a++){var o=r.SPEC[a];if(e[o]){switch(o){case"scheme":i[o]="://";break;case"pass":n[o]=":";case"user":n.host="@";break;case"port":n[o]=":";break;case"query":n[o]="?";break;case"fragment":n[o]="#"}o in n&&(t+=n[o]),o in e&&(t+=e[o]),o in i&&(t+=i[o])}}return n=null,i=null,e=null,t},r.SPEC=["scheme","user","pass","host","port","path","query","fragment"],r.RE=/^([^:]+):\/\/(?:([^:@]+):?([^@]*)@)?(?:([^/?#:]+):?(\d*))([^?#]*)(?:\?([^#]+))?(?:#(.+))?$/,s=function(e){var t,n,i,e=e||window.location.href,r=e.indexOf("?"),a=e.substring(r+1).split("&"),s={};if(-1===r)return s;for(t=0;a.length>t;t++)try{if(r=a[t].indexOf("="),n=a[t].substring(0,r),i=a[t].substring(r+1),!(s[n]=unescape(i)))throw Error("uri has wrong query string when run mapQuery.")}catch(o){}return s},o=function(e,t,n){return("string"==typeof t?RegExp(t,n):t).test(e)},l=function(e,t,n){return n?(n+e+n).indexOf(n+t+n)>-1:e.indexOf(t)>-1},c=function(e){return(e+"").replace(/^\s+|\s+$/g,"")},d=function(e){return c(e.replace(/\s+/g," "))},u=function(e){return e.replace(/-\D/g,function(e){return e.charAt(1).toUpperCase()})},h=function(e){return e.replace(/[A-Z]/g,function(e){return"-"+e.charAt(0).toLowerCase()})},p=function(e){return e.replace(/\b[a-z]/g,function(e){return e.toUpperCase()})},f=function(e){return e.replace(/([-.*+?^${}()|[\]\/\\])/g,"\\$1")},m=function(e,t){return parseInt(e,t||10)},g=function(e){return parseFloat(e)},v=function(e){return(e+"").replace(/\r/gi,"").replace(/\n/gi,"")},A=function(e){return(e+"").replace(/&/gi,"&amp;").replace(/\\/gi,"&#92;").replace(/\'/gi,"&#39;").replace(/\"/gi,"&quot;").replace(/</gi,"&lt;").replace(/>/gi,"&gt;").replace(/ /gi,"&nbsp;").replace(/\r\n/g,"<br />").replace(/\n\r/g,"<br />").replace(/\n/g,"<br />").replace(/\r/g,"<br />")},y=function(e){return(e+"").replace(/\\/gi,"\\").replace(/\'/gi,"'").replace(/\"/gi,"'")},w=function(e,t){var n=e.match(/^#?(\w{1,2})(\w{1,2})(\w{1,2})$/);return n?n.slice(1).hexToRgb(t):null},S=function(e,t){var n=e.match(/\d{1,3}/g);return n?n.rgbToHex(t):null},P=function(e,t){var n="",i=e.replace(/<script[^>]*>([\s\S]*?)<\/script>/gi,function(){return n+=arguments[1]+"\n",""});return t===!0?$exec(n):"function"==$type(t)&&t(n,i),i},b=function(e,t){return encodeURIComponent(e+"")+"="+encodeURIComponent(t+"")},x=function(e){var t=[];for(var n in e)t.push(b(n,e[n]));return t.join("&")},E=function(e,t,n){return e.replace(n||/\\?\{([^{}]+)\}/g,function(e,n){return"\\"==e.charAt(0)?e.slice(1):void 0!=t[n]?t[n]:""})},C=function(e,t,n,i){return RegExp.prototype.isPrototypeOf(t)?e.replace(t,n):e.replace(RegExp(t,i?"gi":"g"),n)},k=function(e,t){return t=t||2,e.replace(/[^\x00-\xff]/g,{2:"aa",3:"aaa"}[t]).length},T=function(e,t){return e.substring(0,e.length-t)},R=function(e,t){for(var n=e;k(n)>t;)n=T(n,1);return n},B=function(e){return-1!==e.search(/^\d+$/)?!0:!1},M=function(e){return-1!==e.search(/^\w+((-\w+)|(\.\w+))*\@[A-Za-z0-9]+((\.|-)[A-Za-z0-9]+)*\.[A-Za-z0-9]+$/)?!0:!1};var I=function(e){return e=e.replace(/&/g,"&amp;"),e=e.replace(/>/g,"&gt;"),e=e.replace(/</g,"&lt;"),e=e.replace(/"/g,"&quot;"),e=e.replace(/'/g,"&#39;")},L=function(e){return e=e.replace(/&amp;/g,"&"),e=e.replace(/&gt;/g,">"),e=e.replace(/&lt;/g,"<"),e=e.replace(/&quot;/g,'"'),e=e.replace(/&#39;/g,"'")},D=function(e){return e=e.replace(/&amp;/g,"&"),e=e.replace(/&gt;/g,">"),e=e.replace(/&lt;/g,"<"),e=e.replace(/\\\\"/g,'"'),e=e.replace(/\\\\'/g,"'")},N=function(e){return e=e.replace(/&/g,"&amp;"),e=e.replace(/>/g,"&gt;"),e=e.replace(/</g,"&lt;"),e=e.replace(/"/g,"&quot;"),e=e.replace(/'/g,"&#39;"),e=e.replace(/=/g,"&#61;"),e=e.replace(/`/g,"&#96;")},_=function(e){return e.replace(/[&'"<>\/\\\-\x00-\x09\x0b-\x0c\x1f\x80-\xff]/g,function(e){return"&#"+e.charCodeAt(0)+";"}).replace(/ /g,"&nbsp;").replace(/\r\n/g,"<br />").replace(/\n/g,"<br />").replace(/\r/g,"<br />")},H=function(e){return e.replace(/[&'"<>\/\\\-\x00-\x1f\x80-\xff]/g,function(e){return"&#"+e.charCodeAt(0)+";"})},O=function(e){return e+="",e.replace(/[\\"']/g,function(e){return"\\"+e}).replace(/%/g,"\\x25").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/\x01/g,"\\x01")},X=function(e){return _(F(escScript(e)))},Y=function(e){return e.replace(/[\\\^\$\*\+\?\{\}\.\(\)\[\]]/g,function(e){return"\\"+e})},F=function(e){return escape(e).replace(/\+/g,"%2B")},W=function(e){return e=encodeURIComponent(e),e=e.replace(/~/g,"%7E"),e=e.replace(/!/g,"%21"),e=e.replace(/\*/g,"%2A"),e=e.replace(/\(/g,"%28"),e=e.replace(/\)/g,"%29"),e=e.replace(/'/g,"%27"),e=e.replace(/\?/g,"%3F"),e=e.replace(/;/g,"%3B")},V=function(e){return/^(https?:\/\/)?[\w\-.]+\.(qq|paipai|soso|taotao)\.com($|\/|\\)/i.test(e)||/^[\w][\w\/\.\-_%]+$/i.test(e)||/^[\/\\][^\/\\]/i.test(e)?!0:!1},z=function(e){var e=encodeURI(e).replace(/(^\s*)|(\s*$)/g,""),t=/(^[a-zA-Z0-9]+[^.]):/,n=/^[\S.]+\.[\S.]+$/,i=/[\w.]+\/(\S*)/,r=/^[\s*]*javascript[\s*]*:/;return t.test(e)||n.test(e)?(t.test(e)||(e="http://"+e),i.test(e)||(e+="/"),r.test(e)&&(e="")):e="",e},G=function(t,n){var i=document.createElement("div");i.style.visibility="hidden",i.style.width="auto",n&&(i.style.fontSize=n+"px"),i.style.position="absolute",i.innerHTML=e.string.encodeHtmlSimple(t),document.body.appendChild(i);var r=i.offsetWidth;return document.body.removeChild(i),r},U=function(e,t,n){for(var i=e.length;i>=0;--i)if(e=e.substring(0,i),n>G(e,t))return e;return""};j.cutByWidth=U,j.toString=t,j.template=n,j.isURL=i,j.parseURL=r,j.buildURL=a,j.mapQuery=s,j.test=o,j.contains=l,j.trim=c,j.clean=d,j.camelCase=u,j.hyphenate=h,j.capitalize=p,j.escapeRegExp=f,j.toInt=m,j.toFloat=g,j.toSingleLine=v,j.toHtml=A,j.toTitle=y,j.toQueryPair=b,j.toQueryString=x,j.hexToRgb=w,j.rgbToHex=S,j.stripScripts=P,j.substitute=E,j.replaceAll=C,j.byteLength=k,j.cutRight=T,j.isNumber=B,j.isEmail=M,j.cutByBytes=R,j.encodeHtmlSimple=I,j.decodeHtmlSimple=L,j.decodeHtmlSimple2=D,j.encodeHtmlAttributeSimple=N,j.encodeHtmlAttribute=H,j.encodeHtml=_,j.encodeScript=O,j.encodeHrefScript=X,j.encodeRegExp=Y,j.encodeUrl=F,j.encodeUriComponent=W,j.vaildTencentUrl=V,j.vaildUrl=z,j.getCharWidth=G}),Jx().$package(function(J){var JSON={};(function(){function f(e){return 10>e?"0"+e:e}function quote(e){return escapable.lastIndex=0,escapable.test(e)?'"'+e.replace(escapable,function(e){var t=meta[e];return"string"==typeof t?t:"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+e+'"'}function str(e,t){var n,i,r,a,s,o=gap,l=t[e];switch(l&&"object"==typeof l&&"function"==typeof l.toJSON&&(l=l.toJSON(e)),"function"==typeof rep&&(l=rep.call(t,e,l)),typeof l){case"string":return quote(l);case"number":return isFinite(l)?l+"":"null";case"boolean":case"null":return l+"";case"object":if(!l)return"null";if(gap+=indent,s=[],"[object Array]"===Object.prototype.toString.apply(l)){for(a=l.length,n=0;a>n;n+=1)s[n]=str(n,l)||"null";return r=0===s.length?"[]":gap?"[\n"+gap+s.join(",\n"+gap)+"\n"+o+"]":"["+s.join(",")+"]",gap=o,r}if(rep&&"object"==typeof rep)for(a=rep.length,n=0;a>n;n+=1)i=rep[n],"string"==typeof i&&(r=str(i,l),r&&s.push(quote(i)+(gap?": ":":")+r));else for(i in l)Object.hasOwnProperty.call(l,i)&&(r=str(i,l),r&&s.push(quote(i)+(gap?": ":":")+r));return r=0===s.length?"{}":gap?"{\n"+gap+s.join(",\n"+gap)+"\n"+o+"}":"{"+s.join(",")+"}",gap=o,r}}var cx=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,escapable=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,gap,indent,meta={"\b":"\\b","	":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},rep;"function"!=typeof JSON.stringify&&(JSON.stringify=function(e,t,n){var i;if(gap="",indent="","number"==typeof n)for(i=0;n>i;i+=1)indent+=" ";else"string"==typeof n&&(indent=n);if(rep=t,t&&"function"!=typeof t&&("object"!=typeof t||"number"!=typeof t.length))throw Error("JSON.stringify");return str("",{"":e})}),"function"!=typeof JSON.parse&&(JSON.parse=function(text,reviver){function walk(e,t){var n,i,r=e[t];if(r&&"object"==typeof r)for(n in r)Object.hasOwnProperty.call(r,n)&&(i=walk(r,n),void 0!==i?r[n]=i:delete r[n]);return reviver.call(e,t,r)}var j;if(cx.lastIndex=0,cx.test(text)&&(text=text.replace(cx,function(e){return"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)})),/^[\],:{}\s]*$/.test(text.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"")))return j=eval("("+text+")"),"function"==typeof reviver?walk({"":j},""):j;throw new SyntaxError("JSON.parse")})})(),J.json=JSON}),Jx().$package(function(e){var t=(e.dom.id,e.dom),n=e.event;e.ui=e.ui||{};var i=0;e.ui.MaskLayer=new e.Class({_getMaskId:function(){return i++},init:function(i){i=i||{};var r=this._getMaskId(),a=this;this._initZIndex=i.zIndex=e.isUndefined(i.zIndex)?9e6:i.zIndex,this._initOpacity=i.opacity=e.isUndefined(i.opacity)?.5:i.opacity,i.appendTo=i.appendTo||document.body,i.className=i.className||"",this.option=i,this.container=t.node("div",{id:"ui_maskLayer_"+r,"class":"ui_maskLayer "+i.className});var s='<div id="ui_maskLayerBody_'+r+'" class="ui_maskLayerBody"></div>';e.browser.ie&&(s+='<iframe class="ui_maskBgIframe"></iframe>'),this.container.innerHTML=s,this.reset(),i.appendTo.appendChild(this.container);var o={onMaskLayerClick:function(){n.notifyObservers(a,"click",a)}};n.on(this.container,"click",o.onMaskLayerClick),this.body=t.id("ui_maskLayerBody_"+r)},getElement:function(){return this.container},append:function(e){this.body.appendChild(e)},show:function(){t.show(this.container),n.notifyObservers(this,"show"),this._isShow=!0},hide:function(){t.hide(this.container),n.notifyObservers(this,"hide"),this._isShow=!1},isShow:function(){return this._isShow},toggleShow:function(){this.isShow()?this.hide():this.show()},getZIndex:function(){return this._zIndex},setZIndex:function(e){t.setStyle(this.container,"zIndex",e),this._zIndex=e},setOpacity:function(e){t.setStyle(this.container,"opacity",e)},reset:function(){return this.setOpacity(this._initOpacity),this.setZIndex(this._initZIndex),this},fadeIn:function(){this.show()},fadeOut:function(){this.hide()},remove:function(){this.option.appendTo&&this.option.appendTo.removeChild(this.container)}})}),Jx().$package(function(e){var t,n,i,r,a,s,o,l,c,d=e.dom,u=e.event,h=function(e){e.preventDefault()},p=!1,f=!1,m=!1,g=!1,v=9e6;e.ui=e.ui||{},e.ui.ScrollDrag=new e.Class({init:function(A,y,b){var x,w,S,P,E,C=this;this.apperceiveEl=A,b=b||{},this.isLimited=b.isLimited||!1,this.dragType=b.dragType,this.isLocked=b.isLocked||!1,this.isLockCursorInScreen=b.isLockCursorInScreen||!1,this.checkTarget=b.checkTarget||null,this.setEffectElDynamicly=b.setEffectElDynamicly||null;var k=!1;this.isLimited&&(this._leftMargin=b.leftMargin||0,this._topMargin=b.topMargin||0,this._rightMargin=b.rightMargin||0,this._bottomMargin=b.bottomMargin||0),b.xOnly&&(this._xOnly=b.xOnly||!1),b.yOnly&&(this._yOnly=b.yOnly||!1),this.effectEl=y===!1?!1:y||A,b.listeners&&u.addObservers({targetModel:this,eventMapping:b.listeners}),this.dragStart=function(e){if(!(C.checkTarget&&!C.checkTarget(e)||C.setEffectElDynamicly&&(C.effectEl=C.setEffectElDynamicly(e),!C.effectEl))){if(e.changedTouches){if(e.changedTouches.length>1)return;e=e.changedTouches[0],document.body.style.WebkitTouchCallout="none"}else e.preventDefault(),e.stopPropagation();C.dragStartIn(e.pageX,e.pageY)}},this.dragStartIn=function(A,y){if(!C.isLocked){u.notifyObservers(C,"beforeStart",{effectEl:C.effectEl}),u.notifyObservers(document,"beforeStart",{effectEl:C.effectEl}),t=d.getClientWidth(),n=d.getClientHeight(),_workAreaClientWidth=b.clientEl?d.getClientWidth(b.clientEl):t,_workAreaClientHeight=b.clientEl?d.getClientHeight(b.clientEl):n,p=b.clientEl?d.getScrollWidth(b.clientEl):t,f=b.clientEl?d.getScrollHeight(b.clientEl):n,m=C.effectEl?parseInt(d.getClientWidth(C.effectEl)):0,g=C.effectEl?parseInt(d.getClientHeight(C.effectEl)):0,C.isLimited&&(i=p-m-C._rightMargin,r=C._leftMargin,a=C._topMargin,s=f-g-C._bottomMargin),c||(c=new e.ui.MaskLayer({opacity:0})),c.setZIndex(v),c.show();var k=C.effectEl?C.getPos(C.effectEl):{left:0,top:0};if(C._oldX=x=k.left,C._oldY=w=k.top,S=A,P=y,E=b.clientEl?d.getScrollTop(b.clientEl):0,e.browser.mobileSafari){u.on(document,"touchmove",C.dragMove),u.on(document,"touchend",C.dragStop);var T=new WebKitCSSMatrix(window.getComputedStyle(C.apperceiveEl).webkitTransform);o=A-T.m41,l=y-T.m42}else u.on(document,"mousemove",C.dragMove),u.on(document,"mouseup",C.dragStop);e.browser.ie&&u.on(document.body,"selectstart",h),e.browser.mobileSafari?u.notifyObservers(C,"start",{x:A,y:y,effectEl:C.effectEl}):u.notifyObservers(C,"start",{x:x,y:w,effectEl:C.effectEl})}},this.dragMove=function(c){if(!C.isLocked){c.browserEvent?(c.browserEvent.preventDefault(),c.browserEvent.stopPropagation()):(c.preventDefault(),c.stopPropagation()),c.changedTouches&&(c=c.changedTouches[0]);var h,p,f=c.pageX,m=c.pageY,v=b.clientEl?d.getScrollTop(b.clientEl):0;if(C.isLockCursorInScreen&&(0>f?f=0:f>t?f=t:0,0>m?m=0:m>n?m=n:0),e.browser.mobileSafari||(h=x+(f-S),p=w+(m-P)+(v-E)),C.isLimited&&(h>i&&!b.isOverRight&&(h=i),r>h&&!b.isOverLeft&&(h=r)),C._oldX===h||C._yOnly||(C._oldX=h,C.effectEl&&!e.browser.mobileSafari&&(C.effectEl.style.left=h+"px"),k=!0),C.isLimited){p>s&&!b.isOverBottom&&(p=s),a>p&&!b.isOverTop&&(p=a);var A=_workAreaClientHeight-g+d.getScrollTop(b.clientEl),y=d.getScrollTop(b.clientEl);if(p>=A)return p=A,u.notifyObservers(C,"overViewBorder",{dir:1,x:h,y:p,originEvent:c,effectEl:C.effectEl}),void 0;if(y>=p)return p=y,u.notifyObservers(C,"overViewBorder",{dir:-1,x:h,y:p,originEvent:c,effectEl:C.effectEl}),void 0}C._oldY===p||C._xOnly||(C._oldY=p,C.effectEl&&!e.browser.mobileSafari&&(C.effectEl.style.top=p+"px"),k=!0);var T=h,R=p;if(C.effectEl&&e.browser.mobileSafari){C._oldX=x+(f-S),C._oldY=w+(m-P);var B=m;h=C._yOnly?x:f-o,p=C._xOnly?w:B-l,C.effectEl.style.webkitTransform="translate3d("+h+"px, "+p+"px, 0px)",T=f,R=m}k&&u.notifyObservers(C,"move",{x:T,y:R,originEvent:c,effectEl:C.effectEl})}},this.dragStop=function(t){if(c.hide(),!C.isLocked){if(document.body.style.WebkitTouchCallout="auto",k||e.browser.mobileSafari){var n=C._oldX,o=C._oldY;C.isLimited&&(n>i&&!b.isOverRight&&(n=i),r>n&&!b.isOverLeft&&(n=r)),C.isLimited&&(o>s&&!b.isOverBottom&&(o=s),a>o&&!b.isOverTop&&(o=a)),e.browser.mobileSafari?(t.preventDefault(),b.noEndCallback&&C.effectEl&&(C.effectEl.style.webkitTransform="none",d.setStyle(C.effectEl,"left",n+"px"),d.setStyle(C.effectEl,"top",o+"px")),u.notifyObservers(C,"end",{x:n,y:o,originEvent:t.changedTouches[0],effectEl:C.effectEl})):u.notifyObservers(C,"end",{x:n,y:o,originEvent:t,effectEl:C.effectEl})}else u.notifyObservers(C,"end",{originEvent:t,effectEl:C.effectEl});if(C.isLimited&&(C.isOverRight||C.isOverLeft||C.isOverTop||C.isOverBottom)){var n=x+(t.pageX-S),o=w+(t.pageY-P),l=p-m-C._rightMargin,v=C._leftMargin,A=f-C._bottomMargin,y=C._topMargin;(n>l||v>n||o>A||y>o)&&u.notifyObservers(C,"overFlowBorder",{x:n,y:o,effectEl:C.effectEl})}p=!1,f=!1,m=!1,g=!1,e.browser.mobileSafari?(u.off(document,"touchmove",C.dragMove),u.off(document,"touchend",C.dragStop)):(u.off(document,"mousemove",C.dragMove),u.off(document,"mouseup",C.dragStop)),e.browser.ie&&u.off(document.body,"selectstart",h),k=!1}},u.on(this.apperceiveEl,"drag",this.dragStart)},setEffect:function(e){this.effectEl=e},lock:function(){this.isLocked=!0,u.off(this.apperceiveEl,"drag",this.dragStart)},unlock:function(){this.isLocked=!1,u.on(this.apperceiveEl,"drag",this.dragStart)},show:function(){d.show(this.apperceiveEl)},hide:function(){d.hide(this.apperceiveEl)},setLimite:function(e){e=e||{},this.isLimited=e.isLimited||!0,this.isLimited&&(this._leftMargin=e.leftMargin||0,this._topMargin=e.topMargin||0,this._rightMargin=e.rightMargin||0,this._bottomMargin=e.bottomMargin||0)},getPos:function(e){for(var t=["left","top"],n=["clientWidth","clientHeight"],i={},r=t.length;r--;){var a=d.getStyle(e,t[r]);if(-1!==a.indexOf("%")){for(var s=e.parentNode;s!==document.body||"static"===d.getStyle(s,"position")||""===d.getStyle(s,"position");)s=s.parentNode;a=parseInt(s[n[r]]*parseInt(a)/100)}else a=parseInt(a)||0;i[t[r]]=a}return i}})}),Jx().$package(function(e){var t=(e.dom,e.event);e.ui=e.ui||{},e.ui.xInput=new e.Class({init:function(n,i){this.element=n,i||(i={}),this.min=i.min||0,this.max=i.max||100,this.rate=i.rate||10,this.canBeFloat=i.canBeFloat||!1,this.accuracy=i.accuracy||2,this.suffix=i.suffix||"",this.step=i.step||1,this.maskLayer=i.maskLayer,this.onChange=i.onChange||null,this.onDragStart=i.onDragStart||null,this.onDragEnd=i.onDragEnd||null,this.onBlur=i.onBlur||null,this.mousedown=e.bind(this.mousedown,this),this.mousemove=e.bind(this.mousemove,this),this.mouseup=e.bind(this.mouseup,this),this.blur=e.bind(this.blur,this),this.element.style.cursor="n-resize",t.on(this.element,"mousedown",this.mousedown),t.on(this.element,"blur",this.blur)},checkValue:function(){var e=this.canBeFloat?parseFloat(this.element.value):parseInt(this.element.value);isNaN(e)?e=this.min:e>this.max?e=this.max:this.min>e&&(e=this.min),this.value=e,this.element.value=(this.canBeFloat?e.toFixed(this.accuracy):e)+this.suffix},mousedown:function(e){return this.checkValue(),this.lastValue=this.value,this.pointer={left:e.pageX,top:e.pageY},this.maskLayer.show(),t.on(document,"mousemove",this.mousemove),t.on(document,"mouseup",this.mouseup),this.onDragStart&&this.onDragStart(),this.mousemove(e),this.isDragging=!0,!1},mousemove:function(e){var t=this.value;return t-=(e.pageY-this.pointer.top)*this.step/this.rate,this.canBeFloat||(t=~~t),t>this.max?t=this.max:this.min>t&&(t=this.min),t!==this.lastValue&&(this.lastValue=t=this.canBeFloat?t.toFixed(this.accuracy):t,this.element.value=t+this.suffix,this.onChange&&this.onChange(t,this.element)),!1},mouseup:function(){return t.off(document,"mousemove",this.mousemove),t.off(document,"mouseup",this.mouseup),this.maskLayer.hide(),this.isDragging=!1,this.onDragEnd&&this.onDragEnd(),!1},blur:function(){this.checkValue(),this.onBlur&&this.onBlur(this.value,this.element)}})}),Jx().$package(function(e){e.dom,e.event,e.ui=e.ui||{},e.ui.FullScreen=new e.Class({init:function(){this._checkSupport(),this.isSupported&&this._checkFunc()},_checkSupport:function(){if(document.cancelFullScreen!==void 0)this.isSupported=!0,this.prefix="";else for(var e=["webkit","moz","o","ms","khtml"],t=0,n=e.length;n>t;t++)if(document[e[t]+"CancelFullScreen"]!==void 0){this.isSupported=!0,this.prefix=e[t];break}},_checkFunc:function(){this.fullScreenChangeEventName=this.prefix+"fullscreenchange",this.isFullScreen=function(){switch(this.prefix){case"":return document.fullScreen;case"webkit":return document.webkitIsFullScreen;default:return document[this.prefix+"FullScreen"]}},this.requestFullScreen=function(e){switch(e||(e=document.documentElement),this.prefix){case"":return e.requestFullScreen();case"webkit":return e.webkitRequestFullScreen(Element.ALLOW_KEYBOARD_INPUT);default:return e[this.prefix+"RequestFullScreen"]()}},this.cancelFullScreen=function(){return""===this.prefix?document.cancelFullScreen():document[this.prefix+"CancelFullScreen"]()}}})}),Jx().$package(function(e){var t=e.dom,n=function(e){var t,n=!0,i=0,r=0;return{getInfo:function(){if(n===!0)return n=!1,t=+new Date,{elapsedTime:0,coeff:0,FPS:0,averageFPS:0};var a=+new Date,s=a-t;t=a;var o=1e3/s;return r++,i+=o,{elapsedTime:s,coeff:e/o,FPS:o,averageFPS:i/r}},pause:function(){n=!0}}};e.ui=e.ui||{},e.ui.Fps=new e.Class({init:function(){var e='<div class="jxFpsPanel">					<p>FPS: <span class="jxFps"></span></p>					<p>Average FPS: <span class="jxAverFps"></span></p>					<p>Time Coefficient: <span class="jxCoeff"></span></p>				</div>';this.domPanel=t.xnode(e),this.domFps=t.mini(".jxFps",this.domPanel)[0],this.domAverFps=t.mini(".jxAverFps",this.domPanel)[0],this.domCoeff=t.mini(".jxCoeff",this.domPanel)[0],document.body.appendChild(this.domPanel),this.timer=n(60)},log:function(){var e=this.info=this.timer.getInfo();return this.domFps.innerHTML=Math.floor(e.FPS),this.domAverFps.innerHTML=Math.floor(e.averageFPS),this.domCoeff.innerHTML=e.coeff.toFixed(2),e},pause:function(){return this.timer.pause(),console.log("averageFPS: ",this.info.averageFPS),this}})});